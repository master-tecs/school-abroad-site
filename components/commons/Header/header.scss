/* ---------- RESETS ---------- */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

a {
  text-decoration: none;
  color: inherit;
}

ul {
  list-style: none;
}

/* ---------- HEADER ---------- */
.header {
  width: 100%;
  z-index: 1000;
  background: #fff;
  transition: all 0.3s ease;

  &--sticky {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    width: 100%;
    background: rgba(255, 255, 255, 0.98);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    
    @media (max-width: 768px) {
      background: rgba(255, 255, 255, 0.99); // More opaque on mobile for better visibility
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
    }
    
    .header__topbar {
      display: none; // Hide topbar when sticky to save space on mobile
    }
    
    .header__navbar {
      padding: 0.75rem 0;
      border-bottom: 1px solid rgba(226, 226, 231, 0.8);
      
      @media (max-width: 768px) {
        padding: 0.625rem 0; // Slightly more padding on mobile for better visibility
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
      }
      
      @media (max-width: 480px) {
        padding: 0.5rem 0;
      }
      
      > .header__container {
        @media (max-width: 768px) {
          padding: 0 1rem; // Ensure proper padding on mobile
        }
        
        @media (max-width: 480px) {
          padding: 0 0.75rem;
        }
      }
    }
  }

  /* ---------- TOPBAR ---------- */
  &__topbar {
    background: linear-gradient(135deg, #732efd 0%, #5a23c8 100%);
    color: white;
    font-size: 0.875rem;
    padding: 0.5rem 0;

    @media (max-width: 768px) {
      font-size: 0.8rem;
      padding: 0.4rem 0;
    }
  }

  &__container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 2rem;

    @media (max-width: 768px) {
      padding: 0 1rem;
    }
  }

  &__contact {
    position: relative;
    overflow: hidden;
    z-index: 1;

    @media (max-width: 768px) {
      width: 100%;
      display: flex;
      justify-content: center;
      margin-bottom: 0.5rem;
    }

    &-list {
      display: flex;
      gap: 1.5rem;
      align-items: center;
      z-index: 2;

      @media (max-width: 768px) {
        flex-direction: column;
        gap: 0.5rem;
        width: 100%;
      }

      @media (max-width: 576px) {
        gap: 0.4rem;
      }
    }

    &-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;

      a {
        color: rgba(255, 255, 255, 0.9);
        transition: color 0.3s ease;
        font-size: 0.875rem;

        &:hover {
          color: #fff;
          text-decoration: underline;
        }
      }

      .header__icon {
        font-size: 16px;
        opacity: 0.9;
      }

      .header__divider {
        margin: 0 0.5rem;
        opacity: 0.6;
      }
    }
  }

  /* ---------- SOCIAL ---------- */
  &__social {
    z-index: 2;

    @media (max-width: 768px) {
      width: 100%;
      display: flex;
      justify-content: center;
    }

    &-list {
      display: flex;
      gap: 1rem;
      align-items: center;

      @media (max-width: 768px) {
        gap: 1.25rem;
      }

      a {
        color: rgba(255, 255, 255, 0.9);
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);

        &:hover {
          color: #fff;
          background: rgba(255, 255, 255, 0.2);
          transform: translateY(-2px);
        }

        svg {
          font-size: 18px;
        }
      }
    }
  }

  /* ---------- NAVBAR ---------- */
  &__navbar {
    font-size: 0.95rem;
    padding: 1rem 0;
    border-bottom: 1px solid #e2e2e7;
    background: #fff;
    transition: padding 0.3s ease;
    position: relative;
    z-index: 1001; // Ensure navbar is above other elements when sticky

    > .header__container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 2rem;

      @media (max-width: 992px) {
        gap: 1rem;
      }
      
      @media (max-width: 768px) {
        gap: 0.75rem;
      }
    }
  }

  &__logo {
    display: flex;
    align-items: center;
    flex-shrink: 0;
    z-index: 1002; // Ensure logo is visible above other elements

    &-link {
      display: flex;
      align-items: center;
      transition: transform 0.3s ease;

      &:hover {
        transform: scale(1.02);
      }
    }

    &-image {
      height: 45px;
      width: auto;
      border-radius: 8px;
      transition: transform 0.3s ease;
      object-fit: contain;

      @media (max-width: 768px) {
        height: 38px;
      }
      
      @media (max-width: 480px) {
        height: 35px;
      }
    }
  }

  /* ---------- MENU ---------- */
  &__menu {
    flex: 1;
    display: flex;
    justify-content: center;

    @media (max-width: 992px) {
      display: none !important;
    }

    &-list {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 2rem;

      @media (max-width: 1200px) {
        gap: 1.5rem;
      }
    }

    &-item {
      position: relative;

      a {
        color: #333;
        font-weight: 500;
        font-size: 0.95rem;
        position: relative;
        padding: 0.5rem 0;
        transition: color 0.3s ease;

        &:hover {
          color: #732efd;
        }

        &::after {
          content: "";
          position: absolute;
          bottom: 0;
          left: 0;
          width: 0;
          height: 2px;
          background: linear-gradient(90deg, #732efd, #5a23c8);
          transition: width 0.3s ease;
        }

        &:hover::after {
          width: 100%;
        }
      }

      &--active a {
        color: #732efd;
        
        &::after {
          width: 100%;
        }
      }
    }
  }

  /* ---------- ACTIONS ---------- */
  &__actions {
    display: flex;
    align-items: center;
    gap: 1rem;
    flex-shrink: 0;
    position: relative;
    z-index: 1002; // Ensure actions are always clickable

    @media (max-width: 992px) {
      gap: 0.75rem;
    }
    
    @media (max-width: 768px) {
      gap: 0.5rem;
    }
  }

  &__auth-buttons {
    display: flex;
    align-items: center;
    gap: 0.75rem;

    @media (max-width: 992px) {
      display: none;
    }
  }

  &__sign-in-btn {
    color: #333 !important;
    font-weight: 600 !important;
    padding: 0.9rem 2rem !important;
    border-radius: 50px !important;
    font-size: 1rem !important;
    height: auto !important;
    
    &:hover {
      color: #732efd !important;
      background: #f5f5f7 !important;
    }
  }

  &__sign-up-btn {
    background: linear-gradient(135deg, #732efd, #5a23c8) !important;
    color: #fff !important;
    font-weight: 600 !important;
    border: none !important;
    padding: 0.9rem 2rem !important;
    border-radius: 50px !important;
    font-size: 1rem !important;
    height: auto !important;
    
    &:hover {
      background: linear-gradient(135deg, #5a23c8, #4a1da5) !important;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(115, 46, 253, 0.3);
    }
  }

  /* ---------- USER PROFILE ---------- */
  &__user-trigger {
    border: none;
    background: none;
    cursor: pointer;
    padding: 0;
    border-radius: 50%;
    transition: transform 0.2s ease;
    outline: 2px solid transparent;

    &:hover {
      transform: scale(1.05);
      outline-color: #732efd;
    }

    &:focus-visible {
      outline: 2px solid #732efd;
      outline-offset: 2px;
    }
  }

  &__avatar {
    width: 40px;
    height: 40px;
    border: 2px solid #e2e2e7;
    transition: border-color 0.3s ease;
    flex-shrink: 0;

    @media (max-width: 768px) {
      width: 38px;
      height: 38px;
      border-width: 2px;
    }
    
    @media (max-width: 480px) {
      width: 36px;
      height: 36px;
    }

    &:hover {
      border-color: #732efd;
    }
  }

  &__avatar-fallback {
    background: linear-gradient(135deg, #732efd, #5a23c8);
    color: #fff;
    font-weight: 600;
    font-size: 0.875rem;
  }

  &__dropdown {
    min-width: 220px;
    padding: 0.5rem;

    .header__user-info {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;

      .header__user-name {
        font-weight: 600;
        color: #111;
        font-size: 0.95rem;
        margin: 0;
      }

      .header__user-email {
        font-size: 0.8rem;
        color: #666;
        margin: 0;
        word-break: break-word;
      }
    }
  }

  &__dropdown-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    width: 100%;
    color: #333;
    text-decoration: none;
    padding: 0.5rem;
    border-radius: 6px;
    transition: background-color 0.2s ease;

    &:hover {
      background: #f5f5f7;
    }

    svg {
      font-size: 18px;
      color: #666;
    }

    span {
      font-size: 0.9rem;
    }
  }

  /* ---------- HAMBURGER ---------- */
  &__hamburger {
    display: none;
    cursor: pointer;
    border: none;
    background: none;
    color: #333;
    padding: 0.5rem;
    border-radius: 8px;
    transition: all 0.3s ease;
    align-items: center;
    justify-content: center;
    min-width: 44px; // Minimum touch target size
    min-height: 44px;
    position: relative;
    z-index: 1003; // Ensure hamburger is always clickable

    @media (max-width: 992px) {
      display: flex;
    }

    @media (max-width: 768px) {
      padding: 0.375rem;
      min-width: 40px;
      min-height: 40px;
    }

    &:hover,
    &:active {
      background: #f5f5f7;
      color: #732efd;
    }

    svg {
      font-size: 24px;
      
      @media (max-width: 768px) {
        font-size: 22px;
      }
    }
  }

  /* ---------- OVERLAY ---------- */
  &__overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    height: 100dvh; // Use dynamic viewport height for mobile browsers
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
    opacity: 0;
    visibility: hidden;
    z-index: 1001; // Above header but below offcanvas
    transition: all 0.3s ease;

    &--active {
      opacity: 1;
      visibility: visible;
    }
  }

  /* ---------- OFFCANVAS ---------- */
  &__offcanvas {
    position: fixed;
    top: 0;
    right: -320px;
    width: 300px;
    max-width: 85vw; // Prevent overflow on very small screens
    height: 100vh;
    height: 100dvh; // Use dynamic viewport height for mobile browsers
    background: #ffffff;
    box-shadow: -4px 0 20px rgba(0, 0, 0, 0.1);
    z-index: 1002; // Above navbar and overlay
    padding: 2rem 1.5rem;
    padding-top: 1rem; // Less top padding for better mobile experience
    transition: right 0.3s ease;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch; // Smooth scrolling on iOS

    @media (max-width: 480px) {
      width: 280px;
      max-width: 90vw;
      padding: 1.5rem 1rem;
      padding-top: 0.75rem;
    }

    &--expanded {
      right: 0;
    }

    &-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid #e2e2e7;
      position: sticky;
      top: 0;
      background: #fff;
      z-index: 1;
      padding-top: 0.75rem; // Add top padding for better spacing
      margin-top: -0.75rem; // Offset the padding
      
      @media (max-width: 480px) {
        margin-bottom: 1.5rem;
        padding-bottom: 1rem;
        padding-top: 0.5rem;
        margin-top: -0.5rem;
      }
    }

    &-close {
      border: none;
      background: none;
      cursor: pointer;
      color: #333;
      padding: 0.5rem;
      border-radius: 8px;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;

      &:hover {
        background: #f5f5f7;
        color: #732efd;
      }

      svg {
        font-size: 24px;
      }
    }

    &-menu {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    &-list {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    &-item {
      a {
        display: block;
        font-weight: 500;
        color: #333;
        padding: 0.75rem 1rem;
        border-radius: 8px;
        transition: all 0.3s ease;
        font-size: 1rem;

        &:hover {
          color: #0071e3;
          background: #f5f5f7;
        }
      }
    }

    &-auth {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      padding-top: 1.5rem;
      border-top: 1px solid #e2e2e7;
      margin-top: 1rem;
    }

    &-link {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      font-weight: 600;
      color: #333;
      padding: 0.9rem 2rem;
      border-radius: 50px;
      transition: all 0.3s ease;
      text-decoration: none;
      font-size: 1rem;
      justify-content: center;

      &:hover {
        color: #0071e3;
        background: #f5f5f7;
      }

      &--primary {
        background: linear-gradient(135deg, #732efd, #5a23c8);
        color: #fff;
        justify-content: center;

        &:hover {
          background: linear-gradient(135deg, #5a23c8, #4a1da5);
          color: #fff;
        }
      }

      svg {
        font-size: 20px;
      }
    }

    &-signout {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      font-weight: 500;
      color: #ff3b30;
      padding: 0.75rem 1rem;
      border-radius: 8px;
      border: none;
      background: none;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.95rem;
      width: 100%;

      &:hover {
        background: #fff5f5;
        color: #ff3b30;
      }

      svg {
        font-size: 20px;
      }
    }
  }
}

/* Active link highlighting */
@media (min-width: 993px) {
  .header__menu-item {
    a.active,
    a[aria-current="page"] {
      color: #732efd;
      
      &::after {
        width: 100%;
      }
    }
  }
}

/* Responsive adjustments */
@media (max-width: 992px) {
  .header {
    &__menu {
      display: none !important;
    }
  }
}

@media (max-width: 576px) {
  .header {
    &__topbar {
      .header__container {
        flex-direction: column;
        gap: 0.5rem;
      }
    }

    &__contact-item {
      font-size: 0.75rem;
    }
  }
}